<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UBI Bank | Premium Portal</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="navbar">
        <div class="logo">UBI <span>Bank</span></div>
        <div class="nav-links">
            <a href="#" onclick="showSection('welcome-section')">Home</a>
            <a href="#" class="nav-btn" onclick="showSection('login-form')">Login</a>
            <a href="#" class="nav-btn" onclick="showSection('signup-form')" style="background: #28a745;">Signup</a>
        </div>
    </div>

    <div class="hero-container">
        <div id="welcome-section" class="fade-in">
            <h1>Welcome to <span class="highlight">UBI</span> Bank</h1>
            <p class="subtitle">Experience secure and premium digital banking.</p>
            <div class="action-buttons">
                <button class="primary-btn" onclick="showSection('signup-form')">Get Started</button>
            </div>
        </div>

        <div id="signup-form" class="glass-form" style="display: none;">
            <h2>Create Account</h2>
            <input type="text" id="regName" placeholder="Full Name" class="premium-input">
            <input type="text" id="regAcc" placeholder="Account Number (Must start with UBI)" class="premium-input">
            <input type="password" id="regPass" placeholder="Create Password" class="premium-input">
            <button class="primary-btn" onclick="handleSignup()">Register</button>
            <p onclick="showSection('login-form')" class="back-link">Already have an account? Login</p>
        </div>

        <div id="login-form" class="glass-form" style="display: none;">
            <h2>Secure Login</h2>
            <input type="text" id="loginAcc" placeholder="Account Number (e.g. UBI123)" class="premium-input">
            <input type="password" id="loginPass" placeholder="Password" class="premium-input">
            <button class="primary-btn" onclick="handleLogin()">Sign In</button>
            <p onclick="showSection('signup-form')" class="back-link">New user? Signup</p>
        </div>

        <div id="dashboard" class="glass-form" style="display: none; width: 650px;">
            <h1 style="margin-bottom: 10px; font-weight: 700;">Transaction</h1>
            <p style="font-size: 0.85rem; opacity: 0.8; margin-bottom: 20px;">Welcome, <span id="user-display">User</span> (<span id="acc-display">0000</span>)</p>
            
            <div style="background: rgba(255,255,255,0.1); padding: 25px; border-radius: 20px; margin-bottom: 25px;">
                <p style="font-size: 0.9rem; opacity: 0.7;">Current Balance</p>
                <h1 id="balance-display" style="font-size: 2.5rem; margin-top: 5px;">₹ 5,000.00</h1>
            </div>

            <div style="text-align: left; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px;">
                <h3 style="font-size: 1rem; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">Credit Card Transfer</h3>
                
                <input type="text" id="targetAcc" placeholder="Receiver Account (e.g. UBI000)" class="premium-input" style="margin-bottom: 12px;">
                <input type="text" id="cardNumber" placeholder="16 Digit Card Number" class="premium-input" style="margin-bottom: 12px;">

                <div style="display: flex; gap: 10px; margin-bottom: 12px;">
                    <input type="text" id="cardExpiry" placeholder="MM/YY" class="premium-input" style="flex: 1;">
                    <input type="password" id="cardCvv" placeholder="CVV" class="premium-input" style="flex: 1;">
                </div>

                <input type="number" id="transferAmount" placeholder="Enter Amount (₹)" class="premium-input" style="margin-bottom: 15px;">
                <button class="primary-btn" style="width: 100%; background: #00a8ff; margin: 0;" onclick="handleTransfer()">OK / Send Money</button>
            </div>

            <div style="margin-top: 30px; text-align: left;">
                <h3 style="font-size: 1rem; color: #00a8ff; margin-bottom: 10px;">Transaction Report</h3>
                <div style="max-height: 200px; overflow-y: auto; background: rgba(0,0,0,0.2); border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);">
                    <table style="width: 100%; font-size: 0.8rem; border-collapse: collapse; text-align: left;">
                        <thead style="background: rgba(255,255,255,0.05);">
                            <tr>
                                <th style="padding: 10px;">Date & Time</th>
                                <th style="padding: 10px;">To Account</th>
                                <th style="padding: 10px; text-align: right;">Amount</th>
                            </tr>
                        </thead>
                        <tbody id="report-body">
                            </tbody>
                    </table>
                </div>
            </div>

            <p onclick="location.reload()" class="back-link" style="margin-top: 25px;">Logout</p>
        </div>
    </div>

    <script>
        let users = {
            "UBI000": { name: "Test User", pass: "000", balance: 10000 }
        };
        let currentUser = "";

        function showSection(id) {
            document.getElementById('welcome-section').style.display = 'none';
            document.getElementById('signup-form').style.display = 'none';
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById(id).style.display = 'block';
        }

        function handleSignup() {
            let name = document.getElementById('regName').value;
            let acc = document.getElementById('regAcc').value;
            let pass = document.getElementById('regPass').value;

            if (!acc.startsWith("UBI")) {
                alert("Account Number must start with 'UBI'!");
                return;
            }
            if(name && acc && pass) {
                users[acc] = { name: name, pass: pass, balance: 5000 };
                alert("Registration Successful! Now Login.");
                showSection('login-form');
            } else { alert("Please fill all fields!"); }
        }

        function handleLogin() {
            let acc = document.getElementById('loginAcc').value;
            let pass = document.getElementById('loginPass').value;

            if (users[acc] && users[acc].pass === pass) {
                currentUser = acc;
                document.getElementById('user-display').innerText = users[acc].name;
                document.getElementById('acc-display').innerText = acc;
                document.getElementById('balance-display').innerText = `₹ ${users[acc].balance.toLocaleString()}.00`;
                showSection('dashboard');
            } else { alert("Invalid Credentials!"); }
        }

        function handleTransfer() {
            let target = document.getElementById('targetAcc').value;
            let card = document.getElementById('cardNumber').value;
            let amount = Number(document.getElementById('transferAmount').value);

            // 1. Endha number potalum money transfer aagura logic (Auto-create receiver)
            if (!target || target === "") {
                alert("Please enter a receiver account!");
                return;
            }
            
            if (!users[target]) {
                users[target] = { name: "External User", balance: 0 };
            }

            // 2. Card Validation (16 digits)
            if (card.length !== 16 || isNaN(card)) {
                alert("Please enter a valid 16-digit Card Number!");
                return;
            }

            // 3. Balance check
            if (amount > users[currentUser].balance || amount <= 0) {
                alert("Insufficient funds or invalid amount!");
                return;
            }

            // SUCCESS LOGIC
            users[currentUser].balance -= amount;
            users[target].balance += amount;

            // Update UI Balance
            document.getElementById('balance-display').innerText = `₹ ${users[currentUser].balance.toLocaleString()}.00`;

            // UPDATE TRANSACTION REPORT
            const tbody = document.getElementById('report-body');
            const row = tbody.insertRow(0); // Adds new record at the top

            const now = new Date();
            const timeStr = `${now.toLocaleDateString('en-GB')} ${now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true })}`;

            row.innerHTML = `
                <td style="padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); opacity: 0.7;">${timeStr}</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); color: #00a8ff;">${target}</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); text-align: right; color: #ff4d4d; font-weight: bold;">- ₹${amount.toLocaleString()}</td>
            `;

            alert(`Transfer Successful! ₹${amount} sent to ${target}`);
            
            // Clear inputs
            document.getElementById('targetAcc').value = "";
            document.getElementById('cardNumber').value = "";
            document.getElementById('transferAmount').value = "";
            document.getElementById('cardExpiry').value = "";
            document.getElementById('cardCvv').value = "";
        }
    </script>
</body>
</html>
